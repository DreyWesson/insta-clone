(this.webpackJsonpinsta=this.webpackJsonpinsta||[]).push([[0],{71:function(e,t,n){},72:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var a=n(4),c=n(2),o=n.n(c),s=n(14),r=n.n(s),i=n(29),l=n(21),u=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,115)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),o(e),s(e)}))},d=n(11),p=(n(71),n(18)),m=n(112),j=n(111),g=(n(72),n(36));n(73),n(74),n(75);g.a.initializeApp({apiKey:"AIzaSyCieCzS6duFxIxszYn--lmhqf6zEBzjH94",authDomain:"insta-343f8.firebaseapp.com",databaseURL:"https://insta-343f8.firebaseio.com",projectId:"insta-343f8",storageBucket:"insta-343f8.appspot.com",messagingSenderId:"111420370821",appId:"1:111420370821:web:a32e8d50a7246221515eec",measurementId:"G-CNGJFK6WLB"});var b=g.a.firestore(),h=g.a.auth(),f=g.a.storage(),O=b,_="SET_USER",v="SET_POSTS",x="SET_OPEN",N="SET_OPEN_SIGN_IN",S="SET_PASSWORD",y="SET_EMAIL",T="SET_USERNAME",C=function(e){return function(t,n){return t({type:x,open:e})}},w=function(e){return function(t,n){return t({type:N,openSignIn:e})}},E=function(e){return function(t,n){return t({type:_,user:e})}},I=function(e){return function(t,n){return t({type:y,email:e})}},A=function(e){return function(t,n){return t({type:S,password:e})}},M=n(103);function P(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var U=Object(M.a)((function(e){return{paper:{position:"absolute",backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),R=n(110),D=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){var t=e.userReducer,n=e.openReducer;return{user:t.user,username:t.username,email:t.email,password:t.password,open:n.open,openSignIn:n.openSignIn}})),n=t.user,o=t.username,s=t.email,r=t.password,i=t.open,u=t.openSignIn,d=Object(c.useState)(P),g=Object(p.a)(d,1)[0],b=U();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(R.a,{open:i,onClose:function(){return e(C(!1))},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(a.jsx)("div",{style:g,className:b.paper,children:Object(a.jsxs)("form",{className:"header__signUp",children:[Object(a.jsx)("center",{children:Object(a.jsx)("img",{className:"header__logo",src:"https://www.vectorlogo.zone/logos/instagram/instagram-wordmark.svg",alt:"insta logo"})}),Object(a.jsx)(m.a,{className:"app__inputs",type:"text",placeholder:"Username",onChange:function(t){return e((n=t.target.value,function(e,t){return e({type:T,username:n})}));var n},value:o}),Object(a.jsx)(m.a,{className:"app__inputs",type:"email",placeholder:"Email",onChange:function(t){return e(I(t.target.value))},value:s}),Object(a.jsx)(m.a,{className:"app__inputs",type:"password",placeholder:"Password",onChange:function(t){return e(A(t.target.value))},value:r}),Object(a.jsx)(j.a,{type:"submit",onClick:function(t){t.preventDefault(),h.createUserWithEmailAndPassword(s,r).then((function(e){return e.user.updateProfile({displayName:o})})).catch((function(e){return alert(e.message)})),e(C(!1))},children:"Sign Up"})]})})}),Object(a.jsx)(R.a,{open:u,onClose:function(){return e(w(!1))},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(a.jsx)("div",{style:g,className:b.paper,children:Object(a.jsxs)("form",{className:"header__signUp",children:[Object(a.jsx)("center",{children:Object(a.jsx)("img",{className:"header__logo",src:"https://www.vectorlogo.zone/logos/instagram/instagram-wordmark.svg",alt:"insta logo"})}),Object(a.jsx)(m.a,{type:"email",placeholder:"Email",onChange:function(t){return e(I(t.target.value))},value:s}),Object(a.jsx)(m.a,{type:"password",placeholder:"Password",onChange:function(t){return e(A(t.target.value))},value:r}),Object(a.jsx)(j.a,{type:"submit",onClick:function(t){t.preventDefault(),h.signInWithEmailAndPassword(s,r).catch((function(e){return e.message})),e(w(!1))},children:"Sign In"})]})})}),Object(a.jsx)("div",{className:"header",children:Object(a.jsxs)("div",{className:"header__container",children:[Object(a.jsx)("img",{className:"header__logo",src:"https://www.vectorlogo.zone/logos/instagram/instagram-wordmark.svg",alt:"insta logo"}),n?Object(a.jsx)(j.a,{className:"header__logoutButton",type:"submit",onClick:function(){return h.signOut()},children:"Logout"}):Object(a.jsxs)("div",{className:"app__loginContainer",children:[Object(a.jsx)(j.a,{type:"submit",onClick:function(){return e(w(!0))},children:"Sign In"}),Object(a.jsx)(j.a,{type:"submit",onClick:function(){return e(C(!0))},children:"Sign Up"})]})]})})]})},F=n(56),k=(n(78),n(79),n(42)),B=function(e){var t=e.username,n=Object(c.useState)(""),o=Object(p.a)(n,2),s=o[0],r=o[1],i=Object(c.useState)(null),l=Object(p.a)(i,2),u=l[0],d=l[1],m=Object(c.useState)(0),g=Object(p.a)(m,2),b=g[0],h=g[1];return Object(a.jsxs)("div",{className:"imageUpload",children:[Object(a.jsx)("h2",{children:"Upload Content"}),Object(a.jsx)("p",{children:Object(a.jsx)("small",{children:Object(a.jsx)("i",{children:"Add caption and upload your contents here"})})}),Object(a.jsx)("input",{className:"imageUpload__caption",type:"text",placeholder:"Enter a caption...",value:s,onChange:function(e){return r(e.target.value)}}),Object(a.jsx)("progress",{className:"imageUpload__progressBar",value:b,max:"100"}),Object(a.jsx)("input",{className:"imageUpload__button",type:"file",onChange:function(e){e.target.files[0]&&d(e.target.files[0])}}),Object(a.jsx)(j.a,{className:"imageUpload__uploadButton",onClick:function(e){f.ref("images/".concat(u.name)).put(u).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);h(t)}),(function(e){return alert(e.message)}),(function(){f.ref("images").child(u.name).getDownloadURL().then((function(e){O.collection("posts").add({timestamp:k.a.firestore.FieldValue.serverTimestamp(),caption:s,imageUrl:e,username:t}),d(null),h(0),r("")})).catch((function(e){return alert(e.message)}))}))},children:"Upload"})]})},L=n(113),z=(n(81),n(106)),W=n(107),J=n(108),K=n(109);function H(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"timeSince",c=n.getHours(),o=n.getMinutes(),s=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=c>=12?"pm":"am";e=(c=(c%=12)||12)+":"+(o=o<10?"0"+o:o)+i,t=s[n.getDay()];var l=r[n.getMonth()],u=function(){switch(a){case"time&date":return"".concat(e," ").concat(n.getDate()," ").concat(l,", ").concat(n.getFullYear());case"time&day&date":return"".concat(e," ").concat(t," ").concat(n.getDate()," ").concat(l,", ").concat(n.getFullYear());case"isToday":return"".concat(e," \u2022 Today");case"checkIfToday":return"".concat(n.getDate(),"\u2022").concat(l,"\u2022").concat(n.getFullYear());case"longTime":return"".concat(t," ").concat(n.getDate()," ").concat(l,", ").concat(n.getFullYear());default:return d(n)}};function d(e){var t=Math.floor((new Date-e)/1e3),n=t/31536e3;return n>=1?Math.floor(n)>1?Math.floor(n)+" years ago":Math.floor(n)+" year ago":(n=t/2592e3)>=1?Math.floor(n)>1?Math.floor(n)+" months ago":Math.floor(n)+" month ago":(n=t/86400)>=1?Math.floor(n)>1?Math.floor(n)+" days ago":Math.floor(n)+" day ago":(n=t/3600)>=1?Math.floor(n)>1?Math.floor(n)+" hours ago":Math.floor(n)+" hour ago":(n=t/60)>=1?Math.floor(n)>1?Math.floor(n)+" minutes ago":Math.floor(n)+" minute ago":Math.floor(n)>1?Math.floor(t)+" seconds ago":Math.floor(t)+" second ago"}return u()}var Y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="checkIfToday";return H(new Date,n)===H(e,n)?H(e,t):H(e,"longTime")},G=function(e){var t=e.postId,n=e.username,o=e.imageUrl,s=e.caption,r=e.user,i=e.timestamp,l=Object(c.useState)([]),u=Object(p.a)(l,2),d=u[0],m=u[1],j=Object(c.useState)(""),g=Object(p.a)(j,2),b=g[0],h=g[1];Object(c.useEffect)((function(){var e;return t&&(e=O.collection("posts").doc(t).collection("comments").orderBy("timestamp","desc").onSnapshot((function(e){m(e.docs.map((function(e){return e.data()})))}))),function(){return e()}}),[t]);var f=function(e){e.preventDefault(),O.collection("posts").doc(t).collection("comments").add({text:b,username:r.displayName,timestamp:k.a.firestore.FieldValue.serverTimestamp()}),h("")};return Object(a.jsx)(a.Fragment,{children:n&&Object(a.jsxs)("div",{className:"post",children:[Object(a.jsxs)("div",{className:"post__header",children:[Object(a.jsx)(L.a,{className:"post__avatar",alt:n,src:o}),Object(a.jsx)("h3",{children:n})]}),Object(a.jsx)("img",{className:"post__image",src:o,alt:""}),Object(a.jsxs)("div",{className:"post__icons",children:[Object(a.jsxs)("div",{className:"post__iconsGrouped",children:[Object(a.jsx)(z.a,{className:"post__icon"}),Object(a.jsx)(W.a,{className:"post__icon"}),Object(a.jsx)(J.a,{className:"post__icon"})]}),Object(a.jsx)(K.a,{className:"post__icon"})]}),Object(a.jsxs)("div",{className:"post__content",children:[Object(a.jsxs)("h4",{className:"post__contentText",children:[Object(a.jsxs)("strong",{children:[n,":"]})," ",s]}),Object(a.jsx)("small",{className:"post__contentTime",children:Y(null===i||void 0===i?void 0:i.toDate())})]}),Object(a.jsxs)("div",{className:"post__comments",children:[d.length>0?Object(a.jsx)("h2",{className:"post__commentsHeader",children:"Comments"}):console.log("\ud83d\udc68\u200d\ud83e\uddb1".concat(n," \ud83d\udce8").concat(s,": \ud83e\udd10 no comment")),null===d||void 0===d?void 0:d.map((function(e){var t;return Object(a.jsxs)("div",{className:"post__commentContainer",children:[Object(a.jsxs)("p",{className:"post__comment",children:[Object(a.jsxs)("strong",{children:[e.username,": "]})," ",e.text]},1e3*Math.random()),Object(a.jsx)("small",{children:e.timestamp&&Y(null===(t=e.timestamp)||void 0===t?void 0:t.toDate())})]})}))]}),Object(a.jsx)("form",{className:"post__commentBox",children:r?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{className:"post__input",type:"text",placeholder:"Add a comment...",value:b,onChange:function(e){return h(e.target.value)}}),Object(a.jsx)("button",{className:"post__button",disabled:!b,type:"submit",onClick:f,children:"Post"})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{className:"post__inputSignup",type:"text",placeholder:"Add a comment...",value:b,onChange:function(e){return h(e.target.value)}}),Object(a.jsx)("button",{className:"post__buttonSignup",disabled:!b,type:"submit",onClick:f,children:"SignIn to comment"})]})})]})})},V=function(){var e=Object(l.c)((function(e){var t=e.userReducer,n=e.postReducer;return{user:t.user,posts:n.posts}})),t=e.user,n=e.posts;return Object(a.jsxs)("div",{className:"poster",children:[t?Object(a.jsx)(B,{username:t.displayName}):Object(a.jsx)("h3",{className:"poster__notLoggedIn",children:"Sign Up To Upload"}),null===n||void 0===n?void 0:n.map((function(e){var n=e.id,c=e.username,o=e.imageUrl,s=e.caption,r=e.timestamp;return Object(a.jsx)(G,{postId:n,user:t,timestamp:r,username:c,imageUrl:o,caption:s},n)}))]})};var q=function(){var e=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CLIENT_TOKEN:"3d59361a5a9993b4d912b279c687858b",REACT_APP_ID:"705949937014356"}),t=e.REACT_APP_CLIENT_TOKEN,n=e.REACT_APP_ID,o="".concat(n,"|").concat(t),s=Object(l.b)(),r=Object(l.c)((function(e){var t=e.userReducer;return{user:t.user,username:t.username}})),i=r.user,u=r.username;return Object(c.useEffect)((function(){var e=h.onAuthStateChanged((function(e){return s(E(e||null))}));return function(){return e()}}),[i,u,s]),Object(c.useEffect)((function(){O.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){var t;s((t=e.docs.map((function(e){var t=e.data(),n=e.id;return Object(d.a)({id:n},t)})),function(e,n){return e({type:v,posts:t})}))}))}),[s]),Object(a.jsxs)("div",{className:"app",children:[Object(a.jsx)(D,{}),Object(a.jsx)(V,{}),Object(a.jsx)(F.a,{url:"https://www.instagram.com/p/BAuc9JmQodPPZBdR1UiXg6YVR2IJ80yx-PatzE0/",clientAccessToken:o,maxWidth:320,hideCaption:!1,containerTagName:"div",protocol:"",injectScript:!0,onLoading:function(){},onSuccess:function(){},onAfterRender:function(){},onFailure:function(){}})]})},Q={user:null,username:"",email:"",password:""},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(console.log(" \ud83d\udcaa ".concat(t.type," ACTION \ud83d\udcaa"),t),t.type){case _:return Object(d.a)(Object(d.a)({},e),{},{user:t.user});case T:return Object(d.a)(Object(d.a)({},e),{},{username:t.username});case S:return Object(d.a)(Object(d.a)({},e),{},{password:t.password});case y:return Object(d.a)(Object(d.a)({},e),{},{email:t.email});default:return e}},Z={posts:[]},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(console.log(" \ud83d\udcaa ".concat(t.type," ACTION \ud83d\udcaa"),t),t.type){case v:return Object(d.a)(Object(d.a)({},e),{},{posts:t.posts});default:return e}},ee={open:!1,openSignIn:!1},te=Object(i.c)({userReducer:X,postReducer:$,openReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(console.log(" \ud83d\udcaa ".concat(t.type," ACTION \ud83d\udcaa"),t),t.type){case x:return Object(d.a)(Object(d.a)({},e),{},{open:t.open});case N:return Object(d.a)(Object(d.a)({},e),{},{openSignIn:t.openSignIn});default:return e}}}),ne=(n(82),n(58)),ae=Object(i.d)(te,Object(i.a)(ne.a));console.log("List of Reducers Stored in STATE \ud83d\udc49",ae.getState()),r.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(l.a,{store:ae,children:Object(a.jsx)(q,{})})}),document.getElementById("root")),u()}},[[83,1,2]]]);
//# sourceMappingURL=main.291b6c9b.chunk.js.map